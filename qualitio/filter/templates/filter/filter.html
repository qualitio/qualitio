{% extends "base_filter.html" %}

{% block module-name %}{% block module-title%}{{ app_label }}{% endblock %}{% endblock %}

{% block application-menu %}
<li><a href="/{{ app_label }}/">browse</a></li>
<li class="active">filter</li>
{% endblock %}

{% block application-view %}
<form method="GET" class="filter-form">
  <div class="filter-forms">
    {% for group in filter %}
    {% if not forloop.first %}
    <div class="groups-linker">- OR -</div>
    {% endif %}
    <div class="application-view-content group group-id-{{ group.id }}">
      {% for form in group %}
      <div class="fieldfilter-form">
	<div class="fieldfilter-label"><label>{{ form.field_name_label }}</label></div>
	{% for field in form %}
	<div class="fieldfilter-field">{{ field.errors }}{{ field }}</div>
	{% endfor %}
	{% if form.field_name %}
	<div class="fieldfilter-tools">
	  <div class="button remove-button">
	    Remove <input type="checkbox" name="control-remove-filter-{{ form.prefix }}" />
	  </div>
	</div>
	{% endif %}
	<div style="clear:both;"></div>
      </div>
      {% endfor %}
    </div>
    {% endfor %}

    <div class="application-view-content">
      <input type="submit" value="Search" /> |
      <a href="/{{ app_label }}/filter/" class="button">Reset query</a>
      <div class="add-new-group-form">{{ filter.new_group_form }}</div>
    </div>
  </div>
</form>

<div class="application-view-content results-container">
  <table class="display">
    <thead>
      <tr>
	{% for column in table.columns %}
	<th>{{ column }}</th>
	{% endfor %}
      </tr>
    </thead>
    <tbody>
      {% for row in table.rows %}
      <tr>
	{% for value in row %}
	<td>{{ value }}</td>
	{% endfor %}
      </tr>
      {% endfor %}
    </tbody>
  </table>
  {% endblock %}
</div>
